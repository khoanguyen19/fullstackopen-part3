(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(15),a=n.n(r),o=n(3),s=n(6),u=n(4),i=n.n(u),j="/api/persons",b={getAll:function(){return i.a.get(j).then((function(e){return e.data}))},create:function(e){return i.a.post(j,e).then((function(e){return e.data}))},remove:function(e){return i.a.delete("".concat(j,"/").concat(e))},update:function(e,t){return i.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))}},d=n(0),l=function(e){var t=e.persons,n=e.setPersons,r=e.setMessage,a=e.setStatus,u=Object(c.useState)(""),i=Object(o.a)(u,2),j=i[0],l=i[1],f=Object(c.useState)(""),m=Object(o.a)(f,2),h=m[0],p=m[1];return Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={name:j,number:h},o=t.find((function(e){return e.name.trim().toUpperCase()===c.name.trim().toUpperCase()}));if(void 0===o)b.create(c).then((function(e){n(t.concat(e)),r("Added ".concat(c.name)),a("success")})).catch((function(e){r(e.response.data),a("error")}));else if(window.confirm("".concat(o.name," is already added to phonebook. Replace the old number with a new one?"))){var u=Object(s.a)(Object(s.a)({},o),c),i=o.id;b.update(i,u).then((function(e){n(t.map((function(t){return t.id!==i?t:e}))),r("Number of '".concat(e.name,"' has been changed")),a("warning")})).catch((function(e){r("Information of ".concat(u.name,"  ").concat(i," has been removed from server")),a("error")}))}setTimeout((function(){r(null),a("")}),5e3),l(""),p("")},children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{value:j,onChange:function(e){l(e.target.value)}})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{value:h,onChange:function(e){p(e.target.value)}})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var t=e.filterName,n=e.setFilterName;return Object(d.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})},m=function(e){var t=e.persons,n=e.setPersons,c=e.filterName,r=t.filter((function(e){return e.name.toUpperCase().includes(c.toUpperCase())}));return Object(d.jsx)("div",{children:r.map((function(e,c){return Object(d.jsxs)("p",{children:[e.name," ",e.number,Object(d.jsx)("button",{onClick:function(){return c=e.id,r=e.name,void(window.confirm("Delete ".concat(r))&&b.remove(c).then((function(){n(t.filter((function(e){return e.id!==c})))})).catch((function(e){alert("".concat(r,"' number was deleted")),n(t.filter((function(e){return e.id!==c})))})));var c,r},children:"Delete"})]},c)}))})},h=function(e){var t=e.message,n=e.status;return null===t?null:Object(d.jsx)("div",{className:n,children:t})},p=(n(39),function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(o.a)(a,2),u=s[0],i=s[1],j=Object(c.useState)(null),p=Object(o.a)(j,2),O=p[0],v=p[1],x=Object(c.useState)(null),g=Object(o.a)(x,2),w=g[0],N=g[1];return Object(c.useEffect)((function(){b.getAll().then((function(e){r(e)}))}),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(h,{message:O,status:w}),Object(d.jsx)(f,{filterName:u,setFilterName:i}),Object(d.jsx)("h3",{children:"Add a new phonebook"}),Object(d.jsx)(l,{persons:n,setPersons:r,setMessage:v,setStatus:N}),Object(d.jsx)("h3",{children:"Numbers"}),Object(d.jsx)(m,{persons:n,filterName:u,setPersons:r})]})});a.a.render(Object(d.jsx)(p,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.69f1d2bc.chunk.js.map