(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(15),a=n.n(r),o=n(3),s=n(6),u=n(4),i=n.n(u),l="/api/persons",j={getAll:function(){return i.a.get(l).then((function(e){return e.data}))},create:function(e){return i.a.post(l,e).then((function(e){return e.data}))},remove:function(e){return i.a.delete("".concat(l,"/").concat(e))},update:function(e,t){return i.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))}},b=n(0),d=function(e){var t=e.persons,n=e.setPersons,r=e.setMessage,a=e.setStatus,u=Object(c.useState)(""),i=Object(o.a)(u,2),l=i[0],d=i[1],f=Object(c.useState)(""),m=Object(o.a)(f,2),h=m[0],O=m[1];return Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={name:l,number:h},o=t.find((function(e){return e.name===c.name}));if(void 0===o)j.create(c).then((function(e){n(t.concat(e)),r("Added ".concat(c.name)),a("success")}));else if(window.confirm("".concat(o.name," is already added to phonebook. Replace the old number with a new one?"))){var u=Object(s.a)(Object(s.a)({},o),c),i=o.id;j.update(i,u).then((function(e){n(t.map((function(t){return t.id!==i?t:e}))),r("Number of '".concat(e.name,"' has been changed")),a("warning")})).catch((function(e){r("Information of ".concat(u.name,"  ").concat(i," has been removed from server")),a("error")}))}console.log(t),setTimeout((function(){r(null),a("")}),5e3),d(""),O("")},children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:l,onChange:function(e){d(e.target.value)}})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:h,onChange:function(e){O(e.target.value)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var t=e.filterName,n=e.setFilterName;return Object(b.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})},m=function(e){var t=e.persons,n=e.setPersons,c=e.filterName,r=t.filter((function(e){return e.name.toUpperCase().includes(c.toUpperCase())}));return Object(b.jsx)("div",{children:r.map((function(e,c){return Object(b.jsxs)("p",{children:[e.name," ",e.number,Object(b.jsx)("button",{onClick:function(){return c=e.id,r=e.name,void(window.confirm("Delete ".concat(r))&&j.remove(c).then((function(){n(t.filter((function(e){return e.id!==c})))})).catch((function(e){alert("".concat(r,"' number was deleted")),n(t.filter((function(e){return e.id!==c})))})));var c,r},children:"Delete"})]},c)}))})},h=function(e){var t=e.message,n=e.status;return null===t?null:Object(b.jsx)("div",{className:n,children:t})},O=(n(39),function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(o.a)(a,2),u=s[0],i=s[1],l=Object(c.useState)(null),O=Object(o.a)(l,2),p=O[0],v=O[1],x=Object(c.useState)(null),g=Object(o.a)(x,2),w=g[0],N=g[1];return Object(c.useEffect)((function(){j.getAll().then((function(e){r(e)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(h,{message:p,status:w}),Object(b.jsx)(f,{filterName:u,setFilterName:i}),Object(b.jsx)("h3",{children:"Add a new phonebook"}),Object(b.jsx)(d,{persons:n,setPersons:r,setMessage:v,setStatus:N}),Object(b.jsx)("h3",{children:"Numbers"}),Object(b.jsx)(m,{persons:n,filterName:u,setPersons:r})]})});a.a.render(Object(b.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.d7b44f20.chunk.js.map